<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Search</title>
  <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
  <style>
    textarea {
      font-family: "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", SimSun, sans-serif;
    }
    .el-select .el-input {
      width: 130px;
    }
  </style>
</head>

<body>
  <div id="app">
    <el-container>
      <el-header>
        <el-menu :default-active="activeIndex" class="el-menu-demo" mode="horizontal" @select="handleSelect">
          <el-menu-item index="1">首页</el-menu-item>
          </el-menu-item>
        </el-menu>
      </el-header>

      <el-main>
        <el-row>
          <el-col :span="24">
            <el-input placeholder="请输入内容" v-model="keyword" class="input-with-select">
              <el-select v-model="select" slot="prepend" placeholder="请选择">
                <el-option label="琉璃神社" value="1"></el-option>
                <el-option label="寂月神社" value="2"></el-option>
              </el-select>
              <el-button slot="append" icon="el-icon-search"></el-button>
            </el-input>
          </el-col>
        </el-row>

        <el-row>
          <el-table :data="tableData">
            <el-table-column type="expand">
              <template slot-scope="props">
                <el-form label-position="left" inline class="demo-table-expand">
                </el-form>
              </template>
            </el-table-column>
            <el-table-column label="标题">
              <template slot-scope="props">
                <a :href="props.row.url" target="_blank">{{props.row.title}}</a>
              </template>
            </el-table-column>
            <el-table-column label="站点" prop="site" width="200px">
            </el-table-column>
            <el-table-column label="下载" width="250px">
              <template slot-scope="scope">
                <el-dropdown split-button type="primary" @command="handleMagnet" @click="handleMagnet(scope.row.magnet)">
                  磁力
                  <el-dropdown-menu slot="dropdown">
                    <el-dropdown-item v-for="item in scope.row.magnet" :key="item" :command="item">{{item}}</el-dropdown-item>
                  </el-dropdown-menu>
                </el-dropdown>
                <el-dropdown split-button type="primary" @command="handlePan" @click="handlePan(scope.row.baidu)">
                  度盘
                  </span>
                  <el-dropdown-menu slot="dropdown">
                    <el-dropdown-item v-for="item in scope.row.baidu" :key="item" :command="item">{{item}}</el-dropdown-item>
                  </el-dropdown-menu>
                </el-dropdown>
              </template>
            </el-table-column>
          </el-table>
        </el-row>
      </el-main>

    </el-container>
  </div>

</body>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.slim.js"></script>
<script src="https://unpkg.com/vue"></script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
  var Main = {
    data() {
      return {
        select: '',
        activeIndex: '1',
        defaultProps: {
          children: 'children',
          label: 'label'
        },
        keyword: '',
        tableData: []
      };
    },
    methods: {
      handleSelect(key, keyPath) {
        console.log(key, keyPath);
      },
      handleMagnet(text) {
        if (typeof (text) != 'string') {
          text = text[0]
        }
        url = 'magnet:?xt=urn:btih:' + text
        console.log(url)
        window.open(url)
      },
      handlePan(text) {
        if (typeof (text) != 'string') {
          text = text[0]
        }
        url = 'http://pan.baidu.com/s/' + text
        console.log(url)
        window.open(url)
      }
    }
  };
  var Ctor = Vue.extend(Main)
  new Ctor().$mount('#app')
</script>

</html>